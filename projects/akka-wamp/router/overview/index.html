<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="author" content="Paolo Angioletti">  
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Overview - akka-wamp-0.12.0</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">akka-wamp-0.12.0</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Router <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="./">Overview</a>
</li>

                        
                            
<li >
    <a href="../config/">Configuration</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Client APIs <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../client/overview/">Overview</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Actor based API</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../client/actor/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../client/actor/session/">Session Handling</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Future based API</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../client/future/overview/">Overview</a>
</li>

        
            
<li >
    <a href="../../client/future/session/">Session Handling</a>
</li>

        
            
<li >
    <a href="../../client/future/pubsub/">Publish and Subscribe</a>
</li>

        
            
<li >
    <a href="../../client/future/rpc/">Remote Procedure Calls</a>
</li>

        
            
<li >
    <a href="../../client/future/payload/">Payload Handling</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../client/stream/">Stream based API</a>
</li>

                        
                            
<li >
    <a href="../../client/config/">Configuration</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../messages/">Messages</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../config/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#router">Router</a></li>
        
            <li class="second-level"><a href="#standalone-router">Standalone router</a></li>
            
        
            <li class="second-level"><a href="#embedded-router">Embedded router</a></li>
            
                <li class="third-level"><a href="#bindunbind">Bind/Unbind</a></li>
            
                <li class="third-level"><a href="#examples">Examples</a></li>
            
        
            <li class="second-level"><a href="#limitations">Limitations</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="router">Router</h1>
<p>Akka Wamp provides you with a router that can be either launched as standalone server process or embedded into your application.</p>
<p>It provides:</p>
<ul>
<li>Both <strong>broker</strong> (for publish/subscribe) and <strong>dealer</strong> (for routed remote procedure calls) roles.</li>
<li>JSON serialization</li>
</ul>
<h2 id="standalone-router">Standalone router</h2>
<p><a href="https://bintray.com/angiolep/universal/akka-wamp/_latestVersion"><img alt="Download" src="https://api.bintray.com/packages/angiolep/universal/akka-wamp/images/download.svg" /></a></p>
<p>Download the latest router version, extract, configure and run it as standalone application:</p>
<pre><code class="bash">curl https://dl.bintray.com/angiolep/universal/akka-wamp-0.12.0.tgz
tar xvfz akka-wamp-0.12.0.tar.gz
cd akka-wamp-0.12.0
vim ./conf/application.conf
./bin/akka-wamp -Dakka.loglevel=DEBUG
</code></pre>

<h2 id="embedded-router">Embedded router</h2>
<p>Make your build depend on the latest version of akka-wamp: </p>
<pre><code class="scala">scalaVersion := &quot;2.11.8&quot;

libraryDependencies ++= Seq(
  &quot;com.github.angiolep&quot; %% &quot;akka-wamp&quot; % &quot;0.12.0&quot;
  // ...
)
</code></pre>

<p>Create the Akka <code>ActorSystem</code> and the Akka Wamp <code>Router</code> actor as follows:</p>
<pre><code class="scala">import akka.actor._
import akka.wamp.router._

implicit val system = ActorSystem(&quot;myapp&quot;)
val router = system.actorOf(Router.props(), &quot;router&quot;)
</code></pre>

<p><img alt="router" src="../router.png" /></p>
<h3 id="bindunbind">Bind/Unbind</h3>
<p>To bind a router a router to a configured transport, just send a <code>Bind</code> command to the <code>IO(Wamp)</code> extension manager:</p>
<pre><code class="scala">import akka.wamp._
import akka.wamp.messages._

val manager = IO(Wamp)
manager ! Bind(router, transport = &quot;default&quot;)
</code></pre>

<p>The manager will spawn a new transport listener for the given transport name as per above configuration. Your application actor, the binder, will be notified by the manager about the outcome of the command:</p>
<pre><code class="scala">override def receive: Receive = {
  case signal @ CommandFailed(cmd, ex) =&gt;
    log.warning(s&quot;$cmd failed because of $ex&quot;)

  case signal @ Bound(listener, url) =&gt;
    log.debug(s&quot;$listener bound to $url&quot;)
    // ...
    // listener ! Unbind
} 
</code></pre>

<p>On successfully bound, you'll be sent the actor reference of the transport listener actor and the URL which that actor is bound to. If you wish to unbind the listener, just the send an <code>Unbind</code> message.</p>
<pre><code class="scala">listener ! Unbind
</code></pre>

<h3 id="examples">Examples</h3>
<ul>
<li><a href="https://github.com/angiolep/akka-wamp/blob/master/examples/router/EmbeddedRouterApp.scala">EmbeddedRouterApp</a></li>
</ul>
<h2 id="limitations">Limitations</h2>
<p>TBD</p></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
